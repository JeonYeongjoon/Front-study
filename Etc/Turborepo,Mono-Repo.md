# Turborepo? Mono-Repo?

## Mono-Repo 

모노레포는 단일 레포지터리에 여러 개의 서브 프로젝트가 존재하는 방식입니다.

최초의 모놀리식 방식은 소스 코드를 모듈화하지 않고 하나의 레포지터리에 모두 넣었다고 생각하면
된다. 모든 코드가 단일 버전으로 서로 직접 의존하기 때문에 코드 재사용이 용이하고 빌드 및 배포 과정도 단순하지만 **관심 분리**가 어렵고 기능 추가나 삭제가 리포지터리 전체에 영향을 줄 수 있다는 단점이 있다. 이런 단점을 해결하고자 멀티레포 방식이 등장했습니다. 멀티 레포 방식에서는 소스 코드를 모듈화한 뒤 각 모듈에 독자적인 영역을 부여하고 버전 관리를 통해 관심을 분리해서 기능 변경이 다른 리포지터리에 직접 영향을 미치지 않도록 개선했다. 하지만 각 모듈이 서로 독립된 영역에 존재하기 때문에 코드 단계에서의 재사용이 어려워졌고 빌드와 배포 과정이 복잡해졌다.

### Mono-repo의 장점

* Visibility
  * 레포지터리가 하나이기 때문에 모든 프로젝트의 코드와 자원 간의 관계와 의존성을
    한눈에 확인 할 수 있습니다.
* Collaboration
  * 모든 커밋 히스토리가 레포지터리에 남기 때문에 히스토리를 추적하거나 전체 레포지터리의
    개발 방향을 이해하는게 쉬워진다.
  * 여러 곳에서 중복으로 사용하는 자산들(테스트 코드 등)을 공유하고 재사용 할 수 있다.
* Speed
  * 배포와 빌드, 테스트와 같은 작업을 병렬로 한 번에 처리할 수 있으므로 한 번의 명령으로
    여러 개의 레포지터리에서 작업을 진행 할 수 있다.

## Turborepo 

Vercel이 인수한 Turborepo는 Js와 Ts코드 베이스의 모노레포를 위한 고성능 빌드 시스템이다.

Turborepo의 주요 미션은 모노레포 환경에서 개발자가 조금 더 쉽고 빠르게 개발할 수 있도록 빌드 
도구를 제공하는 것이다. 고급 빌드 시스템을 구축하는 복잡한 과정을 Turborepo가 대신해 주기 때문에
개발자는 복잡한 설정과 스크립트에 신경 쓰는 대신 개발에 더 집중 할 수 있다. Turborepo의 기본 원칙은 한 번 작업을 수행하며 수행한 계산은 이후 다시 수행하지 않는 것입니다. 따라서 두 번째 실행 때는
이전에 계산한 작업은 건너뛰고 이전에 캐싱해 놓은 로그를 다시 보여준다.

### Turborepo 특징

1. Incremental builds
   * 작업 진행을 캐싱해 이미 계산된 내용은 건너 뛰는 것을 의미한다. 빌드는 딱 한 번만 하는 것을
     목표로 한다.
2. Content-aware hasing
   * 타임스탬프가 아닌 콘텐츠를 인식하는 방식으로 해싱을 지원한다. 이를 통해 모든 파일을
     다시 빌드하는 것이 아니라 변경된 파일만 빌드한다.
3. Cloud caching
   * 클라우드 빌드 캐시를 팀원 및 CI/CD와 공유한다. 이를 통해 로컬 환경을 넘어 클라우드
     환경에서도 빠른 빌드를 제공한다.
4. Parallel execution
   * 모든 코어를 사용하는 병렬 실행을 목표로 한다. 지정된 태스크 단위로 의존성을 판단해
     최대한 병렬적으로 작업을 진행한다.
5. Task Piplines
   * 테스크 간의 연결을 정의해서 빌드를 언제 어떻게 실행할지 판단해 최적화한다.
6. Zero Runtime Overhead
   * 런타임 코드와 소스 맵을 다루지 않기 때문에 런타임 단계에서 파악하지 못한 리스크가 
     불거질 위험이 없다.
7. Pruned subsets
   * 빌드에 필요한 요소만으로 Mono-Repo의 하위 집합을 생성해 PaaS 배포 속도를 높인다.
8. JSON configuration
   * 별도의 코드 작업 없이 JSON 설정으로 터보를 사용할 수 있습니다.
9. Profile in browser
   * 빌드 프로필로 빌드 과정을 시각화하면 병목 지점을 쉽게 찾을 수 있다.